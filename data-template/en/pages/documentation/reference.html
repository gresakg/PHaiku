<div>
	<h2>Reference</h2>
	<p>PHaiku is an abstract class. It has to be extended to be used. By default
	it's extended by the Haiku class, but you can extend it by any other class that
	at least implements the abstract methods:</p>
	<ul>
		<li><code>abstract public function init(\Pimple\Pimple $di);</code> where you
		put all your custom initializations</li>
		<li><code>public abstract function setWidgets();</code> where you set your widgets.</li>
	</ul>
	<h3>External libraries</h3>
	<p>PHaiku uses <a href='http://pimple.sensiolabs.org/'>Pimple</a> as dependency
	injection container. And <a href="http://www.slimframework.com/">Slim framework</a>
	as a basic framework.</p>
	<p>
		Obviously dependencies are managed by Pimple. You can add your own services
		to the container in the <code>./config/config.php</code> file.
	</p>
	<h3>Autoloading</h3>
	<p>
		PHaiku uses Slim's native autoloader, that is a pretty basic PSR-0 compliant
		autoloader. To use Composer, you will probably need to make some changes.
	</p>
	<h3>Configuration</h3>
	<p>All the configuration is in the <code>./config/config.php</code> file. The
		upper part of the configuration file are <a href="http://docs.slimframework.com/#Configuration-Overview">Slim configurations</a></p>
	<p>
		PHaiku specific configuration attributes are:
	</p>
	<ul>
		<li><strong>class.name</strong> - the name of the class that extends PHaiku</li>
		<li><strong>data.store</strong> - relative path to the folder containing content data</li>
		<li><strong>default.ext</strong> - default extention of the data files</li>
		<li><strong>multilingual</strong> - set to true if the site is multilingual</li>
		<li><strong>default.language</strong> - the two letter of the default language</li>
		<li><strong>languages</strong> - array of available language codes. Only needed for multilingual sites.</li>
		<li><strong>routes</strong> - array containing the routes. Each route should contain
			<ul>
				<li><strong>name</strong> - the name of the route</li>
				<li><strong>route</strong> - relative url of the route with <a href="http://docs.slimframework.com/#Route-Parameters">parameters</a></li>
				<li><strong>method</strong> - one of the <a href="http://docs.slimframework.com/#Custom-HTTP-Methods">http methods</a></li>
				<li><strong>handler</strong> - the class method that will handle the request</li>
			</ul>
			You can use as many routes as you want. The higher routes take precedence over the lower ones
			when more matches are possible.
		</li>
		<li><strong>route.conditions</strong> - conditions that each route parameter must comply with
		for the route to be valid.</li>
	</ul>
	<h3>Variables</h3>
	<ul>
		<li>static <strong>$basedir</strong> - defines the absolute path to the working directory.</li>
		<li>protected <strong>$app</strong> - contains an instance of \Slim\Slim.</li>
		<li>protected <strong>$lang</strong> - contains the current language as set
		by the url or default</li>
		<li>public <strong>$data</strong> - contains all the data passed to the view</li>
	</ul>
	<h3>Methods</h3>
	<ul>
		<li><code>public static function setRoutes(\Pimple\Pimple $di)</code> iterates through routes
		and creates them. Used in the bootstrap file.</li>
		<li><code>protected function setBasicData($lang)</code> - called in the constructor
			sets the language, the environment, and the data defined in the <code>_config.php</code> files</li>
		<li><code>public function setPage(array $args)</code> - Main magic: basic controller for the pages.
		Finds and renders the requested page.</li>
		<li><code>protected function langMenu(array $languages)</code> - takes the languages array and
			returns the language menu in case of multilingual site.</li>
		<li><code>protected function setMenu()</code> - builds the main menu.</li>
		<li><code>public static function menuIterator($menu, $baseurl, $class=false)</code> - 
			iterates through the <code>$menu</code> array and actually builds the html of the menu. 
			<code>$baseurl</code> is the root url, <code>$class</code> is the css class to add to
			the <code>&lt;ul&gt;</code> tag</li>
		<li><code>public function getBaseUrl()</code> - returns the absolute base url</li>
		<li><code>public function getFilepath($page, $lang,$ext=false)</code> - 
			builds the path to the requested <code>$page</code>.<code>$lang</code> is the language code,
			<code>$ext</code> is the file extension</li>
		<li><code>protected function processArgs($args)</code> - processes arguments passed 
		to the controller function.</li>
	</ul>
	<h3>Conclusion</h3>
	<p>That's all there is for now. For more information consult the source code.</p>
</div>
